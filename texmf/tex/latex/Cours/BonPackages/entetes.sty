\ProvidesPackage{entetes}
\RequirePackage{logoups}

\def\shortheader{%
\ifdefined\chapter
   \newpage
\fi
  \vbox to 2cm {%
    \hsize = \textwidth
    \parindent = 0pt
    \hrule height 1pt depth 1pt width \textwidth
    \offinterlineskip
    \vfil
    \vbox {%
      \hsize = \textwidth
      \parindent = 0pt
      \hbox to \textwidth {\large\bf\modulename \hfil \formationname~\cetteannee }%
      \vspace*{1em}
      \hbox to \textwidth {\large\bf\documenttype~\documentid \hfil}%
    }%
    \vfil
    \hrule height 1pt depth 1pt width \textwidth
  }%
}

\def\longheader{%
  % On fait une vbox sur toute la page
  \hbox to \textwidth {%
    \vrule width 0pt height \textheight depth 0pt
    \hss
    \vbox {%
      % On commence par une ligne en haut
      \hrule height 1pt depth 1pt width \textwidth
      % On passe 2cm
      \vskip 2cm plus 1cm minus .5cm
      % Le nom de module peut {\^e}tre long, donc par pr{\'e}caution, on le met
      % dans une parbox
      \begin{center}
        \parbox{0.8\textwidth}{%
          \begin{center}
            {\Huge \modulename}%
          \end{center}%
        }
      \end{center}
      % On passe ensuite entre 2,5cm et 4cm
      \vskip 1cm plus 1cm minus 0.5cm
      % Et on {\'e}crit le nom de la formation, l{\`a} encore dans une parbox
      \begin{center}
        \parbox{0.8\textwidth}{%
          \begin{center}
            {\huge \formationname}%
          \end{center}%
        }
      \end{center}
      % On marque dessous l'ann{\'e}e en passant environ 1cm
      \vbox {
        \parindent = 0pt
        % \vskip 1cm plus .5cm minus .5cm
        \hbox to \textwidth {%
          \hfil
          {\LARGE \cetteannee}
          \hfil
        }%
      }%
      % On laisse un blanc avant de mettre le logo de l'universit{\'e}
      \vskip 6cm plus 4cm minus 2cm
      \vbox {%
        \fboxsep = 0pt
        \parindent = 0pt
        \hbox to \textwidth {%
          \hfil
            \logoups
          \hfil
        }%
        \vskip 1cm
      }%
      % On a termin{\'e} le logo, il reste {\`a} faire le pied de page
      \vskip 6cm plus 4cm minus 3cm
      \hrule height 1pt depth 1pt width \textwidth
      \vskip 6pt
      \vbox {%
        \hbox to \textwidth {%
          \vbox {
            \parindent = 0pt
            Yannick Chevalier\hfil\\
            \texttt{yannick.chevalier@gmail.com}%
          }%
          \hfil
        }
      }
    }% on termine la vbox de la page
  }%
}
\ifx\modulename\undefined
  \def\modulename{Web}%
\fi

\ifnum\pdf@strcmp{\modulename}{web}=\z@
% Le nom de module est Web. On cherche si on est une solution ou pas
  \gdef\finalname{\jobname-\versionname-web-\numero.pdf}
  \gdef\solname{\jobname-\versionname-\numero-item.js}
  \gdef\titre#1{%
    \newwrite\tdinfo
    \immediate\openout\tdinfo=\solname
    \immediate\write\tdinfo{{ 'name' : '#1' , 'type' : 'toclink' ,
        'stay': true , 'url' :  urlHref(window.location.href) +
        '\finalname' },}
    \immediate\closeout\tdinfo
  }%
\else
  \def\titre#1{}
\fi
\def\Chapter#1{\chapter{#1}
\def\numero{\arabic{chapter}}
\titre{#1}
%\chapitreQRcode{\arabic{chapter}}%
}





\def\tdtype{Travaux dirig{\'e}s}
\def\td#1{%
  \global\let\courseheader\shortheader
  \global\let\documenttype\tdtype
  \global\def\documentid{#1}%
  \setcounter{num}{0} 
  \courseheader
}

\def\tptype{Travaux pratiques}
\def\tp#1{%
  \global\let\courseheader\shortheader
  \global\let\documenttype\tptype
  \global\def\documentid{#1}%
  \setcounter{num}{0} 
  \courseheader
}


\def\cctype{Contr{\^o}le continu}
\def\controlecontinu{%
  \global\let\courseheader\shortheader
  \global\let\documenttype\cctype
  \global\def\documentid{}%
  \setcounter{num}{0} 
  \courseheader
}
\def\cttype{Contr{\^o}le terminal}
\def\controleterminal{%
  \global\let\courseheader\shortheader
  \global\let\documenttype\cttype
  \global\def\documentid{}%
  \setcounter{num}{0}
  \courseheader
}
\def\eptype{Examen partiel}
\def\examenpartiel{%
  \global\let\courseheader\shortheader
  \global\let\documenttype\eptype
  \global\def\documentid{}%
  \setcounter{num}{0}
  \courseheader
}
\def\ettype{Examen terminal}
\def\examenterminal{%
  \global\let\courseheader\shortheader
  \global\let\documenttype\ettype
  \global\def\documentid{}%
  \setcounter{num}{0}
  \courseheader
}
\def\sstype{Seconde Session}
\def\secondesession{%
  \global\let\courseheader\shortheader
  \global\let\documenttype\sstype
  \global\def\documentid{}%
  \setcounter{num}{0}
  \courseheader
}
\def\qcmtype{Interrogation Rapide}
\def\qcm#1{%  
  \global\let\courseheader\shortheader
  \global\let\documenttype\qcmtype
  \global\def\documentid{#1}%
  \setcounter{num}{0}
  \courseheader
}
\def\fichetype{Fiche}
\def\fiche#1{%
	\global\let\courseheader\shortheader
	\global\let\documenttype\fichetype
	\global\def\documentid{#1}%
	\setcounter{num}{0}
	\courseheader
}



\def\memotype{M{\'e}mo}
\def\memo{%
  \global\let\courseheader\shortheader
  \global\let\documenttype\memotype
  \global\def\documentid{}%
  \setcounter{num}{0}
  \courseheader
}


\endinput
