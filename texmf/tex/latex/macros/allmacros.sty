\ProvidesPackage{allmacros}
\RequirePackage{xspace}
\RequirePackage{expl3}

\newcommand{\tq}{\,\vert\,}
\newcommand{\call}[1]{\ensuremath{\mathcal{#1}}}
\newenvironment{ilitz}{\begin{inparaenum}[\itshape a\upshape)]}{\end{inparaenum}}
\newenvironment{personal}{\underline{\bf Personal work:}\begin{itemize}\item[]}{\end{itemize}}
\newcommand{\set}[1]{\ensuremath{\lbrace #1 \rbrace}}
\newcommand{\condset}[2]{\set{#1 \,\vert{}\, #2}}
\newcommand{\ded}{\leadsto}
\newcommand{\prele}{\preceq}
\newcommand{\interpret}[2][\call{I}]{\ensuremath{[\kern-0.15em[#2]\kern-0.15em]_{#1}}}
\newcommand{\union}{\cup}

\DeclareOption{sets}{%
\newcommand{\Nat}{\ensuremath{\text{\rm{}I\kern-0.20em{}N}}}
\newcommand{\Rat}{\ensuremath{\text{\sf{}l\rm{}\kern-0.42em{}Q}}}
\newcommand{\Real}{\ensuremath{\text{\rm{}I\kern-0.20em{}R}}}
}

\DeclareOption{clauses}{%
\newcommand{\atomordering}{{\prec_a}}
\newcommand{\termordering}{{\prec_t}}
\newcommand{\Clause}[3]{\ensuremath{#3\text{ }{\vdash}_{#2}\text{ }#1}}
\newcommand{\Context}[2]{\ensuremath{#1[#2]}}
\newcommand{\ConstrSys}[1]{\ensuremath{\mathcal{#1}}}
\newcommand{\tuple}[1]{\ensuremath{\left\langle #1 \right\rangle}}
}
\DeclareOption{fo}{%
\newcommand{\Constants}{\ensuremath{C}}
\newcommand{\Variables}{\ensuremath{\mathcal{X}}\xspace}
\newcommand{\atomes}{\ensuremath{\mathcal{A}}\xspace}
\newcommand{\sig}[1]{\ensuremath{\mathcal{T}(#1)}\xspace}
\newcommand{\gsig}[1]{\ensuremath{\mathcal{T}(#1)}\xspace}
\newcommand{\vsig}[1]{\sig{#1,\Variables}\xspace}
}

\DeclareOption{eq}{
\newcommand{\unif}{\ensuremath{\stackrel{?}{=}}}
\newcommand{\rhnorm}[2]{\ensuremath{{(#1)\!\!\downarrow_{#2}}}}
\newcommand{\normi}[2]{\rhnorm{#1}{R_{#2}}}
\newcommand{\norm}[1]{\rhnorm{#1}{}}
\newcommand{\normo}[1]{\rhnorm{#1}{\call{O}}} 
\newcommand{\oraclenorm}[1]{\function{\call{O}_{norm}}{#1}}
\newcommand{\minic}{\ensuremath{c_{\text{min}}}}
}
% Deduction systems
\DeclareOption{ded}{
\newcommand{\intrus}[3]{\ensuremath{(#1,#2,#3)}}
\newcommand{\nintrus}[1]{\intrus{\call{F}_{#1}}{S_{#1}}{\call{E}_{#1}}}
\newcommand{\nded}[1]{\intrus{\call{F}#1}{\call{F}^p#1}{\call{E}#1}}
\newcommand{\combintrus}{\intrus{\call{F}_{1}\cup\call{F}_{2}}%
{\engendre{S_{1}}\cup{}\engendre{S_{2}}}%
{\call{E}_{1}\cup\call{E}_{2}}\xspace}
}

\DeclareOption{xor}{\newcommand{\xor}{\ensuremath{\oplus}}}

\DeclareOption{aci}{
\newcommand{\aci}[1]{\ensuremath{\cdot\left( #1 \right)}}
\newcommand*{\shortaci}[1]{\ensuremath{\cdot\left[#1\right]}}
}

\DeclareOption{dy}{
\newcommand{\enc}[2][]{\ensuremath{\text{\rm enc}_{#1}(#2)}}
\newcommand{\dec}[2][]{\ensuremath{\text{\rm dec}_{#1}(#2)}}
\newcommand{\DY}{\ensuremath{\mathcal{{DY}}}\xspace}
\newcommand{\penc}[2]{\enc[p]{#1,#2}}
\newcommand{\pdec}[2]{\dec[p]{#1,#2}}
%
\newcommand{\senc}[2]{\enc[s]{#1,#2}}
\newcommand{\sdec}[2]{\dec[s]{#1,#2}}
%
\newcommand{\psig}[2]{\sign{#1,#2}}
\newcommand{\pverif}[3]{\verif{#1,#2,#3}}
\newcommand{\paire}[2]{\ensuremath{\left\langle #1,#2\right\rangle}}
\newcommand{\piun}[1]{\ensuremath{\pi_1(#1)}}
\newcommand{\pideux}[1]{\ensuremath{\pi_2(#1)}}
%
\newcommand{\msg}[2]{\ensuremath{\text{\rm msg}({#1},{#2})}}
\newcommand{\symtest}[2]{\ensuremath{\mathrm{symtest}({#1},{#2})}}
}

\newif\ifuseSD
\useSDfalse
\DeclareOption{sd}{
\useSDtrue
\newcommand{\comp}{\circ}
\newcommand{\sfree}{\ensuremath{\text{\rm sf}}}
\newcommand{\sfreep}{\ensuremath{\text{\rm sf+}}}
\newcommand{\trace}[2]{\ensuremath{\text{\rm Tr}_{#2}(#1)}}
\newcommand{\open}[2]{\ensuremath{\text{\rm open}_{#2}(#1)}}
\newcommand{\Ind}{\mbox{\sc{Ind}}\xspace}
\newcommand{\Invar}{\mbox{\sc{In}}\xspace}
\newcommand{\Outvar}{\mbox{\sc{Out}}\xspace}
\newcommand{\Nonces}{\ensuremath{C_{\text{new}}}}
\newcommand{\defsd}[1]{\ensuremath{(\call V #1,\call S #1,\call K #1,\Invar #1,\Outvar #1)}}
}
\DeclareOption{all}{
\ExecuteOptions{sets,clauses,fo,eq,ded,sd,xor,aci,dy}
}

\ProcessOptions

\ifuseSD
\RequirePackage{tikzSD}
\fi
