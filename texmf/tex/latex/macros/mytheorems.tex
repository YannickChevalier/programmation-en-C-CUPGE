\newcommand{\thmref}{}
\newcommand{\envthm}[4]{
\newenvironment{#1}{%
\begin{trivlist}\item {#3 #2.} #4}%
{\end{trivlist}}}


\makeatletter
\newcommand{\checkTheorem}[2]{%
\@ifundefined{#1}{\newtheorem{#1}{#2}}{}
}
\makeatother
\checkTheorem{lemma}{Lemma}
\checkTheorem{proposition}{Proposition}
\checkTheorem{corollary}{Corollary}
\checkTheorem{definition}{Definition}
\checkTheorem{theorem}{Theorem}
\checkTheorem{example}{Example}


\makeatletter
\newcounter{claimc}
\@ifundefined{claim}{
\newenvironment{claim}{\stepcounter{claimc}%
  \begin{trivlist}
  \item \textbf{Claim~\arabic{claimc}.} \rm }%
  {\end{trivlist}}}{}
\makeatother

\envthm{rlemma}{Lemma~\ref{\thmref}, p.~\pageref{\thmref}}{\bf}{\it}
\envthm{rproposition}{Proposition~\ref{\thmref}, p.~\pageref{\thmref}}{\bf}{\it}
\envthm{rtheorem}{Theorem~\ref{\thmref}, p.~\pageref{\thmref}}{\bf}{\it}
\envthm{rcorollary}{Corollary~\ref{\thmref}, p.~\pageref{\thmref}}{\bf}{\it}
\envthm{rdefinition}{Definition~\ref{\thmref}, p.~\pageref{\thmref}}{\bf}{\it}

\newenvironment{refdefinition}[1]{\def\thmref{#1}\begin{rdefinition}}{\end{rdefinition}}
\newenvironment{reftheorem}[1]{\def\thmref{#1}\begin{rtheorem}}{\end{rtheorem}}
\newenvironment{reflemma}[1]{\def\thmref{#1}\begin{rlemma}}{\end{rlemma}}
\newenvironment{refproposition}[1]{\def\thmref{#1}\begin{rproposition}}{\end{rproposition}}
\newenvironment{refcorollary}[1]{\def\thmref{#1}\begin{rcorollary}}{\end{rcorollary}}


\newenvironment{proofclaim}{
  \begin{trivlist}
  \item[]\textrm{Proof of the claim. }\it}
  {\hfil$\Diamond$\end{trivlist}}

\makeatletter
\@ifundefined{proof}{
\newenvironment{proof}{
\setcounter{claimc}{0}%
\begin{trivlist}
\item \textsc{Proof.} \it
}{\hfil$\Box$
\end{trivlist}}}{
\global\let\myproof\proof
\global\let\endmyproof\endproof
\global\def\proof{\setcounter{claimc}{0}\myproof}
\global\def\endproof{\endmyproof}}
\makeatother

\newenvironment{decisionproblem}[1]{

\vspace*{-2ex}

\begin{tabbing}
  \underline{\textbf{#1}}\\
  \hspace*{2em}\= \textbf{Input:}~ \=}{
\end{tabbing}

\vspace*{-2em}

}
\newcommand{\change}{}
\newcommand{\entreeu}[1]{ \hbox{\vbox{\parbox[t]{0.8\linewidth}{#1}}}\\}
\newcommand{\entree}[1]{\> \> \hbox{\vbox{\parbox[t]{0.8\linewidth}{#1}}}\\}  
\newcommand{\sortie}[1]{
\> \textbf{Output:} \> \hbox{\vbox{\parbox[t]{0.8\linewidth}{#1}}}\\}


\newcommand{\direct}{\fbox{$\Rightarrow$}\hspace*{1em}}
\newcommand{\converse}{\fbox{$\Leftarrow$}\hspace*{1em}}