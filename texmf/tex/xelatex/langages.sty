\RequirePackage{listings}
\RequirePackage{upquote}
\RequirePackage{color}

\definecolor{editorGray}{rgb}{0.95, 0.95, 0.95}
\definecolor{editorOcher}{rgb}{.1, 0.4, 0} % #FF7F00 -> rgb(239, 169, 0)
\definecolor{editorGreen}{rgb}{0, 0,0.5} % #007C00 -> rgb(0, 124, 0)


\lstdefinestyle{lstcommon}{
  sensitive=true, 
   basicstyle=\fontfamily{pcr}\NoAutoSpacing\selectfont\footnotesize\color{black},
    xleftmargin={0.75cm},
    numbers=left, % where to put the line-numbers
    numberstyle=\tiny, % the size of the fonts that are used for the line-numbers     
    stepnumber=1,
    firstnumber=1,
    numberfirstline=true,
    backgroundcolor=\color{editorGray},
    showspaces=false, % show spaces adding particular underscores
    showstringspaces=false, % underline spaces within strings
    showtabs=false, % show tabs within strings adding particular underscores
    tabsize=2,
    showtabs=false,
    frame=tb, % adds a frame around the code
    framextopmargin=1ex,
    framexbottommargin=1ex,
    rulesepcolor=\color{black},
    rulecolor=\color{black},
    captionpos=t, % sets the caption-position to bottom
    breaklines=true, % sets automatic line breaking
    breakatwhitespace=false,
    keywordstyle=\color{blue}\bfseries,
    commentstyle=\color{darkgray}\ttfamily,
    ndkeywordstyle=\color{editorGreen}\bfseries,
    stringstyle=\color{editorOcher},
    alsodigit={.:;},
    extendedchars=true,
    % Support for German umlauts
    literate=%
    {Ö}{{\"O}}1
    {Ä}{{\"A}}1
    {Ü}{{\"U}}1
    {ß}{{\ss}}1
    {ü}{{\"u}}1
    {ä}{{\"a}}1
    {ö}{{\"o}}1
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%            Bash
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\lstdefinestyle{custombash}{
    language=bash, 
    escapeinside={\#(*}{*)},
}
\newcounter{bashcode}
\lstnewenvironment{bash}[1]{%
  \renewcommand\lstlistingname{Code bash}
  \lstset{style=custombash,style=lstcommon,caption={Console},label={#1}}
  \setcounter{lstlisting}{\value{bashcode}}}{%
  \refstepcounter{bashcode}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%            C
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\lstdefinestyle{customC}{
    language=C,
    escapeinside={//*}{*)},
}
\newcounter{Ccode}
\lstnewenvironment{C}[2]{%
  \renewcommand\lstlistingname{Code C}
  \lstset{style=customC,style=lstcommon,caption={#2},label={#1}}
  \setcounter{lstlisting}{\value{Ccode}}}{%
  \refstepcounter{Ccode}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%            Ruby
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\lstdefinestyle{customruby}{
    language=ruby, % choose the language of the code
    escapeinside={\#(*}{*)},
}
\newcounter{rubycode}
\lstnewenvironment{ruby}[2]{%
  \renewcommand\lstlistingname{Code ruby}
  \lstset{style=customruby,style=lstcommon,caption={#2},label={#1}}
  \setcounter{lstlisting}{\value{rubycode}}
}{%
    \refstepcounter{rubycode}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%            HTML
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\lstdefinelanguage{JavaScript}{
  morekeywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  morecomment=[s]{/*}{*/},
  morecomment=[l]//,
  morestring=[b]",
  morestring=[b]'
}
\lstdefinelanguage{HTML5}{
        language=html,
        alsoletter={<>=-},
        otherkeywords={
        % HTML tags
        <html>, <head>, <title>, </title>, <meta, />, </head>, <body>,
        <canvas, \/canvas>, <script>, </script>, </body>, </html>, <!, html>, <style>, </style>, ><
        },  
        morekeywords={[2]{
        % General
        =,
        % HTML attributes
        charset=, id=, width=, height=,class=
        % CSS properties
        border:, transform:, -moz-transform:, transition-duration:, transition-property:, transition-timing-function:
        }},
      keywordstyle={[2]{\it}},
      morecomment=[s]{<!--}{-->},
      tag=[s]
}
\lstdefinelanguage{erb}{
  language=ruby,
%  otherkeywords={<\%,<\%=,\%>}
}
\lstdefinestyle{customhtml}{
    language=HTML5, % choose the language of the code
    alsolanguage=JavaScript,
    alsolanguage=erb
}
\newcounter{htmlcode}
\lstnewenvironment{html}[2]{%
  \renewcommand\lstlistingname{Code HTML}
  \lstset{style=lstcommon,style=customhtml,caption={#2},label={#1}}
  \setcounter{lstlisting}{\value{htmlcode}}
}{%
    \refstepcounter{htmlcode}
}

